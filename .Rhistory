library(ggplot2)
library(tidyverse)
library(gtable)
library(scales)
setwd("~/Internship-main/Internship-main/Internship")
library(ggplot2)
library(tidyverse)
library(gtable)
library(scales)
setwd("~/GitHub/Internship")
covid_data <- read.csv('owid-covid-data.csv')
head(covid_data)
names(covid_data)
plot(covid_data$total_cases, covid_data$total_vaccinations)
require(tidyverse)
covid_data
covid_data %>% select(location, date, total_cases,total_cases_per_million, new_cases, total_deaths, total_deaths_per_million, new_deaths, new_deaths_per_million, weekly_hosp_admissions, weekly_icu_admissions_per_million, total_tests, total_tests_per_thousand, positive_rate, total_vaccinations, total_vaccinations_per_hundred, new_vaccinations, new_vaccinations_smoothed_per_million, median_age, aged_65_older)
covid_data %>% filter(location == "United Kingdom")
UK_covid_data <- covid_data %>% select(location, date, total_cases,total_cases_per_million, new_cases, total_deaths, total_deaths_per_million, new_deaths, new_deaths_per_million, weekly_hosp_admissions, weekly_icu_admissions_per_million, total_tests, total_tests_per_thousand, positive_rate, total_vaccinations, total_vaccinations_per_hundred, new_vaccinations, new_vaccinations_smoothed_per_million, median_age, aged_65_older) %>% filter(location == "United Kingdom")
UK_covid_data
UK_covid_data
class(UK_covid_data$date)
UK_covid_data$date<- as.Date(UK_covid_data$date)
class(UK_covid_data$date)
class(UK_covid_data$total_cases)
theme_set(theme_minimal())
ggplot(UK_covid_data, aes(date, total_cases))+
geom_line()+
scale_x_date(date_breaks = "1 month", date_labels = "%b%y" )+
scale_y_continuous(labels = label_number())
theme_set(theme_minimal())
ggplot(UK_covid_data, aes(date, new_cases))+
geom_line()+
scale_x_date(date_breaks = "1 month", date_labels = "%b%y" )+
scale_y_continuous(labels = label_comma(), )+
labs(title = "Daily new cases of Covid-19 in the UK", x= "Date", y="no. New cases")
gtable(UK_covid_data)
gtable(UK_covid_data, widths = 3)
gtable(UK_covid_data, widths = "4" )
gtable(UK_covid_data, widths = 4 )
gtable(widths = 4 )
class(covid_data)
View(covid_data)
theme_set(theme_minimal())
theme_set(theme_minimal())
theme_set(theme_minimal())
theme_set(theme_minimal())
theme_set(theme_minimal())
ggplot(UK_covid_data, aes(date, total_cases))+
geom_line()+
scale_x_date(date_breaks = "1 month", date_labels = "%b%y" )+
scale_y_continuous(labels = label_number())
library(ggplot2)
library(tidyverse)
library(gtable)
library(scales)
setwd("~/Internship-main/Internship-main/Internship")
setwd("~/GitHub/Internship")
covid_data <- read.csv('owid-covid-data.csv')
head(covid_data)
names(covid_data)
theme_set(theme_minimal())
ggplot(UK_covid_data, aes(date, new_cases))+
geom_line()+
scale_x_date(date_breaks = "1 month", date_labels = "%b%y" )+
scale_y_continuous(labels = label_comma(), )+
labs(title = "Daily new cases of Covid-19 in the UK", x= "Date", y="no. New cases")
theme_set(theme_minimal())
ggplot(UK_covid_data, aes(date, total_cases))+
geom_line()+
scale_x_date(date_breaks = "1 month", date_labels = "%b%y" )+
scale_y_continuous(labels = label_number())+
ggsave("Total cases time series")
theme_set(theme_minimal())
ggplot(UK_covid_data, aes(date, total_cases))+
geom_line()+
scale_x_date(date_breaks = "1 month", date_labels = "%b%y" )+
scale_y_continuous(labels = label_number())+
ggsave(Total cases time series)
theme_set(theme_minimal())
ggplot(UK_covid_data, aes(date, total_cases))+
geom_line()+
scale_x_date(date_breaks = "1 month", date_labels = "%b%y" )+
scale_y_continuous(labels = label_number())+
ggsave("Total cases time series")
theme_set(theme_minimal())
ggplot(UK_covid_data, aes(date, total_cases))+
geom_line()+
scale_x_date(date_breaks = "1 month", date_labels = "%b%y" )+
scale_y_continuous(labels = label_number())+
ggsave("UK Total cases time series.png")
theme_set(theme_minimal())
ggplot(UK_covid_data, aes(date, total_cases))+
geom_line()+
scale_x_date(date_breaks = "1 month", date_labels = "%b%y" )+
scale_y_continuous(labels = label_number())
ggsave("UK Total cases time series")
theme_set(theme_minimal())
ggplot(UK_covid_data, aes(date, total_cases))+
geom_line()+
scale_x_date(date_breaks = "1 month", date_labels = "%b%y" )+
scale_y_continuous(labels = label_number())
ggsave("UK Total cases time series.png")
theme_set(theme_minimal())
ggplot(UK_covid_data, aes(date, new_cases))+
geom_line()+
scale_x_date(date_breaks = "1 month", date_labels = "%b%y" )+
scale_y_continuous(labels = label_comma(), )+
labs(title = "Daily new cases of Covid-19 in the UK", x= "Date", y="no. New cases")
ggsave("UK New cases time series.png")
ggplot()+
geom_line(aes(UK_covid_data$date, UK_covid_data$new_cases), colour= "red")+
geom_line(aes(UK_covid_data$date, UK_covid_data$new_deaths), colour= "blue")+
labs(title= "Reports of daily new deaths and new cases", y= "no. reports", x= "Date")+
scale_y_continuous(labels = label_comma())+
geom_vline(xintercept = as.numeric(as.Date("2020-12-08")))+
annotate("text", x= as.Date("2020-12-08"), y= 60000, label= "Vaccine 21+ (8Dec)", angle= 90, size= 2)+
geom_vline(xintercept = as.numeric(as.Date("2021-06-16")))+
annotate("text", x= as.Date("2021-06-16"), y= 60000, label= "Vaccine U21 (8Dec)", angle= 90, size= 2)
ggsave("UK new deaths and new cases time series (vaccine) time series.png")
library(dplyr)
library(ggplot2)
library(tidyverse)
library(lubridate)
covid_data <- read_csv('https://covid.ourworldindata.org/data/owid-covid-data.csv')
UK_covid_data<- UK_covid_data%>%
filter(UK_covid_data$date>= "2020-02-03")
UK_covid_data2<- UK_covid_data
View(UK_covid_data)
UK_covid_data2$week_no.<- as.integer(as.duration("2020-02-03"%--%UK_covid_data$date)/dweeks(1))
as.duration("2020-02-03"%--%"2020-12-08")/dweeks(1)
UK_covid_data2<- UK_covid_data2%>%
group_by(week_no.)%>%
summarise(avg_new_cases= mean(new_cases))%>%
mutate(change= ifelse(week_no.>=45, 1, 0))
View(UK_covid_data2)
UK_covid_data2$vaccine_week<- ifelse(UK_covid_data2$week_no.> 45, 1, 0)
UK_covid_data2$vaccine_week<- UK_covid_data2$week_no.-45
UK_covid_data2$weekpostchange<- UK_covid_data2$change * UK_covid_data2$vaccine_week
UK_covid_data2$change<- as.factor(UK_covid_data2$change)
UK_covid_data2$week_no.<- UK_covid_data2$week_no.+1
UK_covid_data$week.beg<- ceiling_date(UK_covid_data$date, unit = "week", week_start = 1)
week.beg<- summarise(UK_covid_data$week.beg)
UK_covid_data$week.beg<- group_by(UK_covid_data, week.beg)
week.beg<- summarise(UK_covid_data$week.beg)
View(week.beg)
week.begin<- pull(week.beg)
class(week.begin)
ggplot(UK_covid_data2, aes(week.begin, avg_new_cases, colour= change))+
geom_point()+
geom_line()+
scale_y_continuous()+
scale_x_date(date_breaks = "1 week", date_labels = "%d-%m-%y")+
geom_vline(xintercept = "2020-12-08")+
annotate("text", x= "2020-12-08", y= 60000, label= "Vaccine(8Dec)", angle= 90, size= 2, linetype= 2, colour= grey)+
labs(title = "UK New Cases", x= "Week", y= "Confimed new cases")+
theme(axis.text.x = element_text(angle = 90, hjust = 1, vjust = 0.5))
sapply(UK_covid_data2, class)
View(UK_covid_data2)
UK_covid_data2$week.begin <- week.begin
ggplot(UK_covid_data2, aes(week.begin, avg_new_cases, colour= change))+
geom_point()+
geom_line()+
scale_y_continuous()+
scale_x_date(date_breaks = "1 week", date_labels = "%d-%m-%y")+
geom_vline(xintercept = "2020-12-08")+
annotate("text", x= "2020-12-08", y= 60000, label= "Vaccine(8Dec)", angle= 90, size= 2, linetype= 2, colour= grey)+
labs(title = "UK New Cases", x= "Week", y= "Confimed new cases")+
theme(axis.text.x = element_text(angle = 90, hjust = 1, vjust = 0.5))
View(UK_covid_data2)
ggplot(UK_covid_data2, aes(week.begin, avg_new_cases, colour= change))+
ggplot(UK_covid_data2, aes(week.begin, avg_new_cases, colour= change))
ggplot(UK_covid_data2, aes(week.begin, avg_new_cases, colour= change))+
geom_point()
ggplot(UK_covid_data2, aes(week.begin, avg_new_cases, colour= change))+
geom_point()+
geom_line()
ggplot(UK_covid_data2, aes(week.begin, avg_new_cases, colour= change))+
geom_point()+
geom_line()+
scale_y_continuous()
ggplot(UK_covid_data2, aes(week.begin, avg_new_cases, colour= change))+
geom_point()+
geom_line()+
scale_y_continuous()+
scale_x_date(date_breaks = "1 week", date_labels = "%d-%m-%y")
ggplot(UK_covid_data2, aes(week.begin, avg_new_cases, colour= change))+
geom_point()+
geom_line()+
scale_y_continuous()+
scale_x_date(date_breaks = "1 week", date_labels = "%d-%m-%y")+
geom_vline(xintercept = "2020-12-08")
ggplot(UK_covid_data2, aes(week.begin, avg_new_cases, colour= change))+
geom_point()+
geom_line()+
scale_y_continuous()+
scale_x_date(date_breaks = "1 week", date_labels = "%d-%m-%y")+
geom_vline(xintercept = as.Date("2020-12-08"))
ggplot(UK_covid_data2, aes(week.begin, avg_new_cases, colour= change))+
geom_point()+
geom_line()+
scale_y_continuous()+
scale_x_date(date_breaks = "1 week", date_labels = "%d-%m-%y")+
geom_vline(xintercept = as.Date("2020-12-08"))+
annotate("text", x= "2020-12-08", y= 60000, label= "Vaccine(8Dec)", angle= 90, size= 2, linetype= 2, colour= grey)
ggplot(UK_covid_data2, aes(week.begin, avg_new_cases, colour= change))+
geom_point()+
geom_line()+
scale_y_continuous()+
scale_x_date(date_breaks = "1 week", date_labels = "%d-%m-%y")+
geom_vline(xintercept = as.Date("2020-12-08"))+
annotate("text", x= as.Date("2020-12-08"), y= 60000, label= "Vaccine(8Dec)", angle= 90, size= 2, linetype= 2, colour= grey)
ggplot(UK_covid_data2, aes(week.begin, avg_new_cases, colour= change))+
geom_point()+
geom_line()+
scale_y_continuous()+
scale_x_date(date_breaks = "1 week", date_labels = "%d-%m-%y")+
geom_vline(xintercept = as.Date("2020-12-08"), linetype= 2)+
annotate("text", x= as.Date("2020-12-08"), y= 60000, label= "Vaccine(8Dec)", angle= 90, size= 2 , colour= grey)
ggplot(UK_covid_data2, aes(week.begin, avg_new_cases, colour= change))+
geom_point()+
geom_line()+
scale_y_continuous()+
scale_x_date(date_breaks = "1 week", date_labels = "%d-%m-%y")+
geom_vline(xintercept = as.Date("2020-12-08"), linetype= 1)+
annotate("text", x= as.Date("2020-12-08"), y= 60000, label= "Vaccine(8Dec)", angle= 90, size= 2 , colour= grey
ggplot(UK_covid_data2, aes(week.begin, avg_new_cases, colour= change))+
geom_point()+
geom_line()+
scale_y_continuous()+
scale_x_date(date_breaks = "1 week", date_labels = "%d-%m-%y")+
geom_vline(xintercept = as.Date("2020-12-08"), linetype= 1)+
annotate("text", x= as.Date("2020-12-08"), y= 60000, label= "Vaccine(8Dec)", angle= 90, size= 2 , colour= grey)
ggplot(UK_covid_data2, aes(week.begin, avg_new_cases, colour= change))+
geom_point()+
geom_line()+
scale_y_continuous()+
scale_x_date(date_breaks = "1 week", date_labels = "%d-%m-%y")+
geom_vline(xintercept = as.Date("2020-12-08"), linetype= 2)+
annotate("text", x= as.Date("2020-12-08"), y= 60000, label= "Vaccine(8Dec)", angle= 90, size= 2 , colour= grey)+
labs(title = "UK New Cases", x= "Week", y= "Confimed new cases")+
theme(axis.text.x = element_text(angle = 90, hjust = 1, vjust = 0.5))
ggplot(UK_covid_data2, aes(week.begin, avg_new_cases, colour= change))+
geom_point()+
geom_line()+
scale_y_continuous()+
scale_x_date(date_breaks = "1 week", date_labels = "%d-%m-%y")+
geom_vline(xintercept = as.Date("2020-12-08"), linetype= 2)+
annotate("text", x= as.Date("2020-12-08"), y= 60000, label= "Vaccine(8Dec)", angle= 90, size= 2 , colour= grey)+
labs(title = "UK New Cases", x= "Week", y= "Confimed new cases")+
theme(axis.text.x = element_text(angle = 90, hjust = 1, vjust = 0.5))
ggplot(UK_covid_data2, aes(week.begin, avg_new_cases, colour= change))+
geom_point()+
geom_line()+
scale_y_continuous()+
scale_x_date(date_breaks = "1 week", date_labels = "%d-%m-%y")+
geom_vline(xintercept = as.numeric(as.Date("2020-12-08")), linetype=2, colour = "red", lwd = 0.5) +
annotate("text", x=as.Date("2020-12-08"), y=13000, label= "First Lockdown (26 Mar)", angle=90, hjust = -1, vjust = -0.5, colour = "red", fontface = 'bold')
ggplot(UK_covid_data2, aes(week.begin, avg_new_cases, colour= change))+
geom_point()+
geom_line()+
scale_y_continuous()+
scale_x_date(date_breaks = "1 week", date_labels = "%d-%m-%y")+
geom_vline(xintercept = as.numeric(as.Date("2020-12-08")), linetype=2, colour = "red", lwd = 0.5) +
annotate("text", x=as.Date("2020-12-08"), y=13000, label= "First Lockdown (26 Mar)", angle=90, hjust = -1, vjust = -0.5, colour = "red", fontface = 'bold') +
#  geom_vline(xintercept = as.Date("2020-12-08"), linetype= 2)+
#  annotate("text", x= as.Date("2020-12-08"), y= 60000, label= "Vaccine(8Dec)", angle= 90, size= 2 , colour= grey)+
labs(title = "UK New Cases", x= "Week", y= "Confimed new cases"
ggplot(UK_covid_data2, aes(week.begin, avg_new_cases, colour= change))+
geom_point()+
geom_line()+
scale_y_continuous()+
scale_x_date(date_breaks = "1 week", date_labels = "%d-%m-%y")+
geom_vline(xintercept = as.numeric(as.Date("2020-12-08")), linetype=2, colour = "red", lwd = 0.5) +
annotate("text", x=as.Date("2020-12-08"), y=13000, label= "First Lockdown (26 Mar)", angle=90, hjust = -1, vjust = -0.5, colour = "red", fontface = 'bold') +
#  geom_vline(xintercept = as.Date("2020-12-08"), linetype= 2)+
#  annotate("text", x= as.Date("2020-12-08"), y= 60000, label= "Vaccine(8Dec)", angle= 90, size= 2 , colour= grey)+
labs(title = "UK New Cases", x= "Week", y= "Confimed new cases")
ggplot(UK_covid_data2, aes(week.begin, avg_new_cases, colour= change))+
geom_point()+
geom_line()+
scale_y_continuous()+
scale_x_date(date_breaks = "1 week", date_labels = "%d-%m-%y")+
geom_vline(xintercept = as.numeric(as.Date("2020-12-08")), linetype=2, colour = "red", lwd = 0.5) +
annotate("text", x=as.Date("2020-12-08"), y=13000, label= "First Lockdown (26 Mar)", angle=90, hjust = -1, vjust = -0.5, colour = "red", fontface = 'bold') +
#  geom_vline(xintercept = as.Date("2020-12-08"), linetype= 2)+
#  annotate("text", x= as.Date("2020-12-08"), y= 60000, label= "Vaccine(8Dec)", angle= 90, size= 2 , colour= grey)+
labs(title = "UK New Cases", x= "Week", y= "Confimed new cases")+
theme(axis.text.x = element_text(angle = 90, hjust = 1, vjust = 0.5))
